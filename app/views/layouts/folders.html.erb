<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
<head>
	<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<title>Rockflu</title>
	<%= stylesheet_link_tag 'boxroom', 'jplayer' %>
	<%= auto_discovery_link_tag(:rss, { :controller => 'folder', :action => :feed, :id => controller.folder_id, :access_key => @logged_in_user.rss_access_key })%>
	<%= javascript_include_tag 'jquery-1.3.2.min', 'application' %>
	<%= javascript_include_tag 'jquery.jplayer' %>
	<%= javascript_include_tag 'jquery.utils.min' %>
	<script type="text/javascript" charset="utf-8">
		$(function () {
			$('.focused').select();
			$('.unit').each(function() {
				this.innerHTML = $.filesizeformat(this.innerHTML);
			});
			$('.time').each(function() {
				this.innerHTML = $.timeago(this.innerHTML);
			});
			$('.playButton').
			each(function() {
				// add to playlist
			}).
			click(function(e) {
				var jThis = $(this);

				e.preventDefault();

				$('#song_title').html(jThis.attr('title'));
				$('#jPlayer').setFile(jThis.attr('href')).play();
			});
			$('#jPlayer')
			.jPlayer({swfPath: '/flash'})
			.jPlayerId("play", "player_play")
			.jPlayerId("pause", "player_pause")
			.jPlayerId("stop", "player_stop")
			.jPlayerId("loadBar", "player_progress_load_bar")
			.jPlayerId("playBar", "player_progress_play_bar")
			.jPlayerId("volumeMin", "player_volume_min")
			.jPlayerId("volumeMax", "player_volume_max")
			.jPlayerId("volumeBar", "player_volume_bar")
			.jPlayerId("volumeBarValue", "player_volume_bar_value")
			.onProgressChange(function(loaded, p, P, t, T) {
				var myPlayedTime = new Date(t);
				var ptMin = (myPlayedTime.getUTCMinutes() < 10) ? "0" + myPlayedTime.getUTCMinutes() : myPlayedTime.getUTCMinutes();
				var ptSec = (myPlayedTime.getUTCSeconds() < 10) ? "0" + myPlayedTime.getUTCSeconds() : myPlayedTime.getUTCSeconds();
				$('#play_time').text(ptMin+":"+ptSec);

				var myTotalTime = new Date(T);
				var ttMin = (myTotalTime.getUTCMinutes() < 10) ? "0" + myTotalTime.getUTCMinutes() : myTotalTime.getUTCMinutes();
				var ttSec = (myTotalTime.getUTCSeconds() < 10) ? "0" + myTotalTime.getUTCSeconds() : myTotalTime.getUTCSeconds();
				$('#total_time').text(ttMin+":"+ttSec);
			})
			.onSoundComplete( function() {
				// next/random song or replay one/all
			});
		});
	</script>
</head>
<body id="foldersLayout">
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
	<div id="chromeFrame"></div>
	<script>
	CFInstall.check({
		node: "chromeFrame",
		destination: "http://www.waikiki.com"
	});
	</script>

	<div id="top">
		<div class="header">
			<div class="userSettings">
				<%= render :partial=>'shared/logged_in_user_menu' %>
			</div>

			<div class="search">
			</div>
		</div>

		<div class="topNavigation">
			<div class="links">
				<%= render :partial => 'shared/navigation' %>
			</div>
		</div>
	</div>

	<div id="middle">
		<div class="actionLinks">
			<%= render :partial => 'sidebar' %>
		</div>

		<div class="content">
			<table cellspacing="0" cellpadding="0">
				<tr>
					<td>
						<%= yield %>
					</td>
				</tr>
			</table>
		</div>
	</div>

	<div id="bottom">
		<%= render :partial=>'shared/jplayer' %>
	</div>

</body>
</html>